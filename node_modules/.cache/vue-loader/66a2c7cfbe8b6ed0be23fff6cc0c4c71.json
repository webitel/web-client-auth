{"remainingRequest":"/home/dev/work/client-auth/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dev/work/client-auth/src/components/contact-center/teams/opened-team-skills-popup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dev/work/client-auth/src/components/contact-center/teams/opened-team-skills-popup.vue","mtime":1581327003120},{"path":"/home/dev/work/client-auth/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dev/work/client-auth/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/dev/work/client-auth/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dev/work/client-auth/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport popup from '@/components/utils/popup';\nimport editComponentMixin from '@/mixins/editComponentMixin';\nimport {required, numeric, minValue, maxValue} from 'vuelidate/lib/validators';\nimport {mapActions, mapState} from \"vuex\";\nimport {getBucketsList} from \"../../../api/contact-center/buckets/buckets\";\nimport {getSkillsList} from \"../../../api/contact-center/agentSkills/agentSkills\";\n\nexport default {\n    name: \"opened-team-skills-popup\",\n    mixins: [editComponentMixin],\n    components: {\n        popup,\n    },\n\n    data() {\n        return {\n            dropdownSkillsList: [],\n            dropdownBucketsList: [],\n        }\n    },\n\n    validations: {\n        itemInstance: {\n            skill: {\n                required,\n            },\n            lvl: {\n                required,\n            },\n        }\n    },\n\n    mounted() {\n        this.loadItem();\n        this.loadSkillsOptions();\n        this.loadBucketsOptions();\n    },\n\n    computed: {\n        ...mapState('ccenter/teams/skills', {\n            id: state => state.itemId,\n            itemInstance: state => state.itemInstance\n        }),\n        skill: {\n            get() {\n                return this.$store.state.ccenter.teams.skills.itemInstance.skill\n            },\n            set(value) {\n                this.setItemProp({prop: 'skill', value})\n            }\n        },\n        lvl: {\n            get() {\n                return this.$store.state.ccenter.teams.skills.itemInstance.lvl\n            },\n            set(value) {\n                this.setItemProp({prop: 'lvl', value})\n            }\n        },\n        minCapacity: {\n            get() {\n                return this.$store.state.ccenter.teams.skills.itemInstance.minCapacity\n            },\n            set(value) {\n                this.setItemProp({prop: 'minCapacity', value})\n            }\n        },\n        maxCapacity: {\n            get() {\n                return this.$store.state.ccenter.teams.skills.itemInstance.maxCapacity\n            },\n            set(value) {\n                this.setItemProp({prop: 'maxCapacity', value})\n            }\n        },\n        bucket: {\n            get() {\n                return this.$store.state.ccenter.teams.skills.itemInstance.bucket\n            },\n            set(value) {\n                this.setItemProp({prop: 'bucket', value})\n            }\n        },\n    },\n\n    methods: {\n        async save() {\n            const invalid = this.checkValidations();\n            if (!invalid) {\n                try {\n                    !this.id ? await this.addItem() : await this.updateItem();\n                    console.log('closing?');\n                    this.$emit('close');\n                } catch {}\n            }\n        },\n\n        async loadSkillsOptions(search) {\n            const response = await getSkillsList(0, 10, search);\n            this.dropdownSkillsList = response.map(item => {\n                return {\n                    name: item.name,\n                    id: item.id,\n                }\n            });\n        },\n\n        async loadBucketsOptions(search) {\n            const response = await getBucketsList(0, 10, search);\n            this.dropdownBucketsList = response.map(item => {\n                return {\n                    name: item.name,\n                    id: item.id,\n                }\n            });\n        },\n\n        ...mapActions('ccenter/teams/skills', {\n            setItemProp: 'SET_ITEM_PROPERTY',\n            addItem: 'ADD_ITEM',\n            updateItem: 'UPDATE_ITEM',\n            loadItem: 'LOAD_ITEM',\n        }),\n    }\n}\n",{"version":3,"sources":["opened-team-skills-popup.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"opened-team-skills-popup.vue","sourceRoot":"src/components/contact-center/teams","sourcesContent":["<template>\n    <popup\n            :title=\"$tc('objects.ccenter.skills.skills', 1)\"\n            :primaryAction=\"save\"\n            :primaryText=\"computePrimaryText\"\n            :primaryDisabled=\"computeDisabled\"\n            @close=\"$emit('close')\"\n            overflow\n    >\n        <form>\n            <dropdown-select\n                    v-model=\"skill\"\n                    :v=\"$v.itemInstance.skill\"\n                    :options=\"dropdownSkillsList\"\n                    :label=\"$tc('objects.ccenter.skills.skills', 1)\"\n                    @search=\"loadSkillsOptions\"\n                    required\n            ></dropdown-select>\n\n            <form-input\n                    v-model.trim=\"lvl\"\n                    :v=\"$v.itemInstance.lvl\"\n                    :label=\"$t('objects.ccenter.teams.lvl')\"\n                    required\n            ></form-input>\n\n            <div class=\"label\">{{$t('objects.ccenter.skills.capacity')}}*</div>\n            <div class=\"input-row-wrap\">\n                <form-input\n                        v-model.trim=\"minCapacity\"\n                        :label=\"$t('objects.from')\"\n                ></form-input>\n                <form-input\n                        v-model.trim=\"maxCapacity\"\n                        :label=\"$t('objects.to')\"\n                ></form-input>\n            </div>\n\n            <dropdown-select\n                    v-model=\"bucket\"\n                    :options=\"dropdownBucketsList\"\n                    :label=\"$tc('objects.ccenter.buckets.buckets', 1)\"\n                    @search=\"loadBucketsOptions\"\n            ></dropdown-select>\n        </form>\n    </popup>\n</template>\n\n<script>\n    import popup from '@/components/utils/popup';\n    import editComponentMixin from '@/mixins/editComponentMixin';\n    import {required, numeric, minValue, maxValue} from 'vuelidate/lib/validators';\n    import {mapActions, mapState} from \"vuex\";\n    import {getBucketsList} from \"../../../api/contact-center/buckets/buckets\";\n    import {getSkillsList} from \"../../../api/contact-center/agentSkills/agentSkills\";\n\n    export default {\n        name: \"opened-team-skills-popup\",\n        mixins: [editComponentMixin],\n        components: {\n            popup,\n        },\n\n        data() {\n            return {\n                dropdownSkillsList: [],\n                dropdownBucketsList: [],\n            }\n        },\n\n        validations: {\n            itemInstance: {\n                skill: {\n                    required,\n                },\n                lvl: {\n                    required,\n                },\n            }\n        },\n\n        mounted() {\n            this.loadItem();\n            this.loadSkillsOptions();\n            this.loadBucketsOptions();\n        },\n\n        computed: {\n            ...mapState('ccenter/teams/skills', {\n                id: state => state.itemId,\n                itemInstance: state => state.itemInstance\n            }),\n            skill: {\n                get() {\n                    return this.$store.state.ccenter.teams.skills.itemInstance.skill\n                },\n                set(value) {\n                    this.setItemProp({prop: 'skill', value})\n                }\n            },\n            lvl: {\n                get() {\n                    return this.$store.state.ccenter.teams.skills.itemInstance.lvl\n                },\n                set(value) {\n                    this.setItemProp({prop: 'lvl', value})\n                }\n            },\n            minCapacity: {\n                get() {\n                    return this.$store.state.ccenter.teams.skills.itemInstance.minCapacity\n                },\n                set(value) {\n                    this.setItemProp({prop: 'minCapacity', value})\n                }\n            },\n            maxCapacity: {\n                get() {\n                    return this.$store.state.ccenter.teams.skills.itemInstance.maxCapacity\n                },\n                set(value) {\n                    this.setItemProp({prop: 'maxCapacity', value})\n                }\n            },\n            bucket: {\n                get() {\n                    return this.$store.state.ccenter.teams.skills.itemInstance.bucket\n                },\n                set(value) {\n                    this.setItemProp({prop: 'bucket', value})\n                }\n            },\n        },\n\n        methods: {\n            async save() {\n                const invalid = this.checkValidations();\n                if (!invalid) {\n                    try {\n                        !this.id ? await this.addItem() : await this.updateItem();\n                        console.log('closing?');\n                        this.$emit('close');\n                    } catch {}\n                }\n            },\n\n            async loadSkillsOptions(search) {\n                const response = await getSkillsList(0, 10, search);\n                this.dropdownSkillsList = response.map(item => {\n                    return {\n                        name: item.name,\n                        id: item.id,\n                    }\n                });\n            },\n\n            async loadBucketsOptions(search) {\n                const response = await getBucketsList(0, 10, search);\n                this.dropdownBucketsList = response.map(item => {\n                    return {\n                        name: item.name,\n                        id: item.id,\n                    }\n                });\n            },\n\n            ...mapActions('ccenter/teams/skills', {\n                setItemProp: 'SET_ITEM_PROPERTY',\n                addItem: 'ADD_ITEM',\n                updateItem: 'UPDATE_ITEM',\n                loadItem: 'LOAD_ITEM',\n            }),\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    .input-row-wrap {\n        display: flex;\n\n        .form-input {\n            width: 50%;\n\n            &:first-child {\n                margin-right: 18px;\n            }\n        }\n    }\n</style>"]}]}