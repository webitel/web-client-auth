{"remainingRequest":"/home/dev/work/client-auth/node_modules/babel-loader/lib/index.js!/home/dev/work/client-auth/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/dev/work/client-auth/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dev/work/client-auth/src/components/routing/flow/upload-flow-popup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dev/work/client-auth/src/components/routing/flow/upload-flow-popup.vue","mtime":1579620192370},{"path":"/home/dev/work/client-auth/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dev/work/client-auth/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/dev/work/client-auth/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dev/work/client-auth/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/dev/work/client-auth/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport checkbox from \"../../utils/checkbox\";\nimport formInput from \"../../utils/form-input\";\nimport divider from \"../../utils/divider\";\nimport popup from \"../../utils/popup\";\nimport required from \"vuelidate/src/validators/required\";\nimport { addFlow, updateFlow } from \"../../../api/routing/flow/flow\";\nexport default {\n  name: \"upload-flow-popup\",\n  components: {\n    formInput: formInput,\n    checkbox: checkbox,\n    divider: divider,\n    popup: popup\n  },\n  props: {\n    file: {\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      create: true,\n      flow: {\n        name: 'file.name'\n      }\n    };\n  },\n  validations: {\n    flow: {\n      name: {\n        required: required\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.processJSON();\n  },\n  computed: {\n    computeDisabledSave: function computeDisabledSave() {\n      this.$v.$touch(); // if its still pending or an error is returned do not submit\n\n      return this.$v.$pending || this.$v.$error;\n    }\n  },\n  methods: {\n    save: function () {\n      var _save = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.create) {\n                  _context.next = 12;\n                  break;\n                }\n\n                _context.prev = 1;\n                delete this.flow.id;\n                _context.next = 5;\n                return addFlow(this.flow);\n\n              case 5:\n                this.$emit('close');\n                _context.next = 10;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n\n              case 10:\n                _context.next = 20;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.next = 15;\n                return updateFlow(this.flow.id, this.flow);\n\n              case 15:\n                this.$emit('close');\n                _context.next = 20;\n                break;\n\n              case 18:\n                _context.prev = 18;\n                _context.t1 = _context[\"catch\"](12);\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 8], [12, 18]]);\n      }));\n\n      function save() {\n        return _save.apply(this, arguments);\n      }\n\n      return save;\n    }(),\n    processJSON: function processJSON() {\n      var _this = this;\n\n      var reader = new FileReader();\n      reader.addEventListener('load', function (e) {\n        var file = e.target.result;\n        if (file) _this.flow = JSON.parse(file);\n      });\n      reader.readAsText(this.file);\n    },\n    addItem: function () {\n      var _addItem = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(item) {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function addItem(_x) {\n        return _addItem.apply(this, arguments);\n      }\n\n      return addItem;\n    }()\n  }\n};",{"version":3,"sources":["upload-flow-popup.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,OAAA,QAAA;AACA,OAAA,SAAA;AACA,OAAA,OAAA;AACA,OAAA,KAAA;AACA,OAAA,QAAA,MAAA,mCAAA;AACA,SAAA,OAAA,EAAA,UAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,mBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA,SADA;AAEA,IAAA,QAAA,EAAA,QAFA;AAGA,IAAA,OAAA,EAAA,OAHA;AAIA,IAAA,KAAA,EAAA;AAJA,GAFA;AAQA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,QAAA,EAAA;AADA;AADA,GARA;AAaA,EAAA,IAbA,kBAaA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,IADA;AAEA,MAAA,IAAA,EAAA;AAAA,QAAA,IAAA,EAAA;AAAA;AAFA,KAAA;AAIA,GAlBA;AAoBA,EAAA,WAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,QAAA,EAAA;AADA;AADA;AADA,GApBA;AA4BA,EAAA,OA5BA,qBA4BA;AACA,SAAA,WAAA;AACA,GA9BA;AAgCA,EAAA,QAAA,EAAA;AACA,IAAA,mBADA,iCACA;AACA,WAAA,EAAA,CAAA,MAAA,GADA,CAEA;;AACA,aAAA,KAAA,EAAA,CAAA,QAAA,IACA,KAAA,EAAA,CAAA,MADA;AAEA;AANA,GAhCA;AAyCA,EAAA,OAAA,EAAA;AACA,IAAA,IADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEA,KAAA,MAFA;AAAA;AAAA;AAAA;;AAAA;AAIA,uBAAA,KAAA,IAAA,CAAA,EAAA;AAJA;AAAA,uBAKA,OAAA,CAAA,KAAA,IAAA,CALA;;AAAA;AAMA,qBAAA,KAAA,CAAA,OAAA;AANA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,uBAWA,UAAA,CAAA,KAAA,IAAA,CAAA,EAAA,EAAA,KAAA,IAAA,CAXA;;AAAA;AAYA,qBAAA,KAAA,CAAA,OAAA;AAZA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAkBA,IAAA,WAlBA,yBAkBA;AAAA;;AACA,UAAA,MAAA,GAAA,IAAA,UAAA,EAAA;AACA,MAAA,MAAA,CAAA,gBAAA,CAAA,MAAA,EAAA,UAAA,CAAA,EAAA;AACA,YAAA,IAAA,GAAA,CAAA,CAAA,MAAA,CAAA,MAAA;AACA,YAAA,IAAA,EAAA,KAAA,CAAA,IAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,OAHA;AAKA,MAAA,MAAA,CAAA,UAAA,CAAA,KAAA,IAAA;AACA,KA1BA;AA4BA,IAAA,OA5BA;AAAA;AAAA;AAAA,gDA4BA,IA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAzCA,CAAA","sourcesContent":["<template>\n    <popup\n            class=\"upload-popup\"\n            :title=\"$t('objects.importJSON')\"\n            :primaryAction=\"save\"\n            :primaryDisabled=\"computeDisabledSave\"\n            @close=\"$emit('close')\"\n    >\n        <section class=\"popup-content\">\n            <checkbox\n                    v-model=\"create\"\n                    :label=\"$t('objects.routing.flow.createNew')\"\n            ></checkbox>\n            <form>\n                <form-input\n                        v-model=\"flow.name\"\n                        :v=\"$v.flow.name\"\n                        :label=\"$t('objects.name')\"\n                        required\n                ></form-input>\n            </form>\n        </section>\n    </popup>\n</template>\n\n<script>\n    import checkbox from '../../utils/checkbox';\n    import formInput from '../../utils/form-input';\n    import divider from '../../utils/divider';\n    import popup from '../../utils/popup';\n    import required from \"vuelidate/src/validators/required\";\n    import {addFlow, updateFlow} from \"../../../api/routing/flow/flow\";\n\n    export default {\n        name: \"upload-flow-popup\",\n        components: {\n            formInput,\n            checkbox,\n            divider,\n            popup\n        },\n        props: {\n            file: {\n                required: true,\n            }\n        },\n        data() {\n            return {\n                create: true,\n                flow: {name: 'file.name'},\n            }\n        },\n\n        validations: {\n            flow: {\n                name: {\n                    required\n                }\n            }\n        },\n\n        mounted() {\n            this.processJSON();\n        },\n\n        computed: {\n            computeDisabledSave() {\n                this.$v.$touch();\n                // if its still pending or an error is returned do not submit\n                return this.$v.$pending ||\n                    this.$v.$error;\n            }\n        },\n\n        methods: {\n            async save() {\n                if (this.create) {\n                    try {\n                        delete this.flow.id;\n                        await addFlow(this.flow);\n                        this.$emit('close');\n                    } catch {\n                    }\n                } else {\n                    try {\n                        await updateFlow(this.flow.id, this.flow);\n                        this.$emit('close');\n                    } catch {\n                    }\n                }\n            },\n\n            processJSON() {\n                const reader = new FileReader();\n                reader.addEventListener('load', (e) => {\n                        const file = e.target.result;\n                        if (file) this.flow = JSON.parse(file);\n                    }\n                );\n                reader.readAsText(this.file);\n            },\n\n            async addItem(item) {\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    @import \"../../../assets/css/objects/upload-popup\";\n\n    .popup-content {\n        margin: 38px 0 18px;\n    }\n</style>"],"sourceRoot":"src/components/routing/flow"}]}